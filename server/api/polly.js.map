{"version":3,"sources":["../../src/api/polly.js"],"names":["config","api","AWS","require","accessKeyId","process","env","S3_KEY","secretAccessKey","S3_SECRET","region","polly","Polly","get","req","res","voice","query","toLowerCase","params","OutputFormat","Text","text","TextType","VoiceId","voices","synthesizeSpeech","err","data","console","log","set","send","AudioStream","post","body","aditi","amy","astrid","bianca","brian","camila","carla","carmen","celine","chantal","conchita","cristiano","dora","emma","enrique","ewa","filiz","geraint","giorgio","gwyneth","hans","ines","ivy","jacek","jan","joanna","joey","justin","karl","kendra","kimberly","lea","liv","lotte","lucia","lupe","mads","maja","marlene","mathieu","matthew","maxim","mia","miguel","mizuki","naja","nicole","penelope","raveena","ricardo","ruben","russell","salli","seoyeon","takumi","tatyana","vicki","vitoria","zeina","zhiyu"],"mappings":"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","file":"polly.js","sourcesContent":["import { Router } from \"express\";\nimport fs, { createReadStream } from \"fs\";\n// import awsConfig from \"../../aws-config.json\";\n\nexport default ({ config }) => {\n  let api = Router();\n  var AWS = require(\"aws-sdk\");\n\n  AWS.config.accessKeyId = process.env.S3_KEY;\n  AWS.config.secretAccessKey = process.env.S3_SECRET; // prettier-ignore\n  //   AWS.config.accessKeyId = process.env.S3_KEY || awsConfig.accessKeyId;\n  //   AWS.config.secretAccessKey = process.env.S3_SECRET || awsConfig.secretAccessKey; // prettier-ignore\n  AWS.config.region = \"us-west-2\";\n\n  var polly = new AWS.Polly();\n\n  api.get(\"/\", async (req, res) => {\n    var voice = req.query.voice ? req.query.voice.toLowerCase() : null;\n    var params = {\n      OutputFormat: \"mp3\",\n      Text: req.query.text,\n      TextType: \"text\",\n      VoiceId: voices[voice] || \"Joanna\",\n    };\n\n    polly.synthesizeSpeech(params, function(err, data) {\n      if (err) {\n        console.log(err);\n      } else {\n        res.set(\"Content-Type\", \"audio/mp3\");\n        res.send(data.AudioStream);\n      }\n    });\n  });\n\n  api.post(\"/\", async (req, res) => {\n    var voice = req.body.voice ? req.body.voice.toLowerCase() : null;\n    var params = {\n      OutputFormat: \"mp3\",\n      Text: req.body.text,\n      TextType: \"text\",\n      VoiceId: voices[voice] || \"Joanna\",\n    };\n\n    polly.synthesizeSpeech(params, function(err, data) {\n      if (err) {\n        console.log(err);\n      } else {\n        res.set(\"Content-Type\", \"audio/mp3\");\n        res.send(data.AudioStream);\n      }\n    });\n  });\n\n  return api;\n};\n\nvar voices = {\n  aditi: \"Aditi\",\n  amy: \"Amy\",\n  astrid: \"Astrid\",\n  bianca: \"Bianca\",\n  brian: \"Brian\",\n  camila: \"Camila\",\n  carla: \"Carla\",\n  carmen: \"Carmen\",\n  celine: \"Celine\",\n  chantal: \"Chantal\",\n  conchita: \"Conchita\",\n  cristiano: \"Cristiano\",\n  dora: \"Dora\",\n  emma: \"Emma\",\n  enrique: \"Enrique\",\n  ewa: \"Ewa\",\n  filiz: \"Filiz\",\n  geraint: \"Geraint\",\n  giorgio: \"Giorgio\",\n  gwyneth: \"Gwyneth\",\n  hans: \"Hans\",\n  ines: \"Ines\",\n  ivy: \"Ivy\",\n  jacek: \"Jacek\",\n  jan: \"Jan\",\n  joanna: \"Joanna\",\n  joey: \"Joey\",\n  justin: \"Justin\",\n  karl: \"Karl\",\n  kendra: \"Kendra\",\n  kimberly: \"Kimberly\",\n  lea: \"Lea\",\n  liv: \"Liv\",\n  lotte: \"Lotte\",\n  lucia: \"Lucia\",\n  lupe: \"Lupe\",\n  mads: \"Mads\",\n  maja: \"Maja\",\n  marlene: \"Marlene\",\n  mathieu: \"Mathieu\",\n  matthew: \"Matthew\",\n  maxim: \"Maxim\",\n  mia: \"Mia\",\n  miguel: \"Miguel\",\n  mizuki: \"Mizuki\",\n  naja: \"Naja\",\n  nicole: \"Nicole\",\n  penelope: \"Penelope\",\n  raveena: \"Raveena\",\n  ricardo: \"Ricardo\",\n  ruben: \"Ruben\",\n  russell: \"Russell\",\n  salli: \"Salli\",\n  seoyeon: \"Seoyeon\",\n  takumi: \"Takumi\",\n  tatyana: \"Tatyana\",\n  vicki: \"Vicki\",\n  vitoria: \"Vitoria\",\n  zeina: \"Zeina\",\n  zhiyu: \"Zhiyu\",\n};\n"]}