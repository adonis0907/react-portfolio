{"version":3,"sources":["../../src/api/polly.js"],"names":["config","api","AWS","require","accessKeyId","process","env","S3_KEY","awsConfig","secretAccessKey","S3_SECRET","region","polly","Polly","post","req","res","console","log","body","params","OutputFormat","Text","text","TextType","VoiceId","voices","voice","range","headers","synthesizeSpeech","err","data","set","send","AudioStream","Aditi","Amy","Astrid","Bianca","Brian","Camila","Carla","Carmen","Celine","Chantal","Conchita","Cristiano","Dora","Emma","Enrique","Ewa","Filiz","Geraint","Giorgio","Gwyneth","Hans","Ines","Ivy","Jacek","Jan","Joanna","Joey","Justin","Karl","Kendra","Kimberly","Lea","Liv","Lotte","Lucia","Lupe","Mads","Maja","Marlene","Mathieu","Matthew","Maxim","Mia","Miguel","Mizuki","Naja","Nicole","Penelope","Raveena","Ricardo","Ruben","Russell","Salli","Seoyeon","Takumi","Tatyana","Vicki","Vitoria","Zeina","Zhiyu"],"mappings":"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","file":"polly.js","sourcesContent":["import { Router } from \"express\";\nimport fs, { createReadStream } from \"fs\";\nimport awsConfig from \"../../aws-config.json\";\n\nexport default ({ config }) => {\n  let api = Router();\n  var AWS = require(\"aws-sdk\");\n\n  AWS.config.accessKeyId = process.env.S3_KEY || awsConfig.accessKeyId;\n  AWS.config.secretAccessKey = process.env.S3_SECRET || awsConfig.secretAccessKey; // prettier-ignore\n  AWS.config.region = \"us-west-2\";\n\n  var polly = new AWS.Polly();\n\n  api.post(\"/\", async (req, res) => {\n    console.log(req.body);\n    var params = {\n      OutputFormat: \"mp3\",\n      Text: req.body.text,\n      TextType: \"text\",\n      VoiceId: voices[req.body.voice] || \"Joanna\",\n    };\n    const range = req.headers.range;\n\n    polly.synthesizeSpeech(params, function(err, data) {\n      if (err) {\n        console.log(err);\n      } else {\n        res.set(\"Content-Type\", \"audio/mp3\");\n        res.send(data.AudioStream);\n      }\n    });\n  });\n\n  return api;\n};\n\nvar voices = {\n  Aditi: \"Aditi\",\n  Amy: \"Amy\",\n  Astrid: \"Astrid\",\n  Bianca: \"Bianca\",\n  Brian: \"Brian\",\n  Camila: \"Camila\",\n  Carla: \"Carla\",\n  Carmen: \"Carmen\",\n  Celine: \"Celine\",\n  Chantal: \"Chantal\",\n  Conchita: \"Conchita\",\n  Cristiano: \"Cristiano\",\n  Dora: \"Dora\",\n  Emma: \"Emma\",\n  Enrique: \"Enrique\",\n  Ewa: \"Ewa\",\n  Filiz: \"Filiz\",\n  Geraint: \"Geraint\",\n  Giorgio: \"Giorgio\",\n  Gwyneth: \"Gwyneth\",\n  Hans: \"Hans\",\n  Ines: \"Ines\",\n  Ivy: \"Ivy\",\n  Jacek: \"Jacek\",\n  Jan: \"Jan\",\n  Joanna: \"Joanna\",\n  Joey: \"Joey\",\n  Justin: \"Justin\",\n  Karl: \"Karl\",\n  Kendra: \"Kendra\",\n  Kimberly: \"Kimberly\",\n  Lea: \"Lea\",\n  Liv: \"Liv\",\n  Lotte: \"Lotte\",\n  Lucia: \"Lucia\",\n  Lupe: \"Lupe\",\n  Mads: \"Mads\",\n  Maja: \"Maja\",\n  Marlene: \"Marlene\",\n  Mathieu: \"Mathieu\",\n  Matthew: \"Matthew\",\n  Maxim: \"Maxim\",\n  Mia: \"Mia\",\n  Miguel: \"Miguel\",\n  Mizuki: \"Mizuki\",\n  Naja: \"Naja\",\n  Nicole: \"Nicole\",\n  Penelope: \"Penelope\",\n  Raveena: \"Raveena\",\n  Ricardo: \"Ricardo\",\n  Ruben: \"Ruben\",\n  Russell: \"Russell\",\n  Salli: \"Salli\",\n  Seoyeon: \"Seoyeon\",\n  Takumi: \"Takumi\",\n  Tatyana: \"Tatyana\",\n  Vicki: \"Vicki\",\n  Vitoria: \"Vitoria\",\n  Zeina: \"Zeina\",\n  Zhiyu: \"Zhiyu\",\n};\n"]}